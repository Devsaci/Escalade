<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorator="template1">
<head>
    <meta charset="UTF-8"/>
    <title>Profil</title>
    <link rel="stylesheet" type="text/css" href="../static/css/bootstrap.min.css"
          th:href="@{css/bootstrap.min.css}"/>
    <link rel="stylesheet" type="text/css" href="../static/css/MyStylesheet.css"
          th:href="@{css/MyStylesheet.css}"/>

</head>

<body>

<div layout:fragment="content">
    <section id="Profil">
        <div class="container">
        <h2> Votre Profil </h2>
        <h4> Hello  <strong name="rmUser" th:inline="text">[[${#httpServletRequest.remoteUser}]]</strong> n'oublies
            pas de valider tes demandes de prêt! </h4>
            <p></p>
            <h4> Mes Topos :</h4>
            <p></p>
            <div id="affTopo" class="col-md-6" th:each="s:${listopo}">
                <div class="panel-default">
                    <div class="panel-heading" >
                        <div th:text="${s.nomTopo}">Site:</div>
                    </div>
                    <div class="panel-body" >
                        <div th:text="${s.descriptionTopo}">
                        </div>
                    </div>
                    <div class="pull-right">
                      <label> Statut du topo : </label>
                        <Span th:if="${s.loan} == true">Preté</Span>
                        <Span th:if="${s.loan} == false">Libre</Span>
                    </div>
                </div>
            </div>

            <p></p>
            <h4> Mes prêts :</h4>
            <p></p>
            <p th:unless="${listPretProprio.size()}"> Vous n'avez pas de demande de prêt.</p>

            <div id="lpp" class="col-md-12" th:each="p:${listPretProprio}">

                   <p> <Strong th:text="${p.getEmprunteur()}"></Strong> aimerait vous emprunter
                       <Strong th:text="${p.getNomDuTopo()}"></Strong> du
                       <Span th:text="${p.getDebutPret()}"></Span> au
                       <Span th:text="${p.getFinPret()}"></Span>.
                       <button>Accepter</button> <button>Refuser</button>
                   </p>
            </div>


            <p></p>
            <h4> Mes emprunts :</h4>
            <p></p>
            <p th:unless="${listPretEmprunteur.size()}"> Vous n'avez pas de demande d'emprunts.</p>

            <div id="lpe" class="col-md-12" th:each="e:${listPretEmprunteur}">

                <p> Vous demande d'emprunt du topo : <Strong th:text="${e.getNomDuTopo()}"></Strong>
                     a <Strong th:text="${e.getProprietaire()}"></Strong>
                    du <Span th:text="${e.getDebutPret()}"></Span> au <Span th:text="${e.getFinPret()}"></Span>
                    est <Strong th:text="${e.getStatut()}"></Strong>.
                </p>
            </div>

            <div class="col-md-8">
                <div class="panel-default">
                    <div id="profCreaTopo" class="panel-heading" th:text="'NEW TOPO'"></div>
                    <div class="panel-body">
                        <form th:action="@{saveTopo}" method="post">
                            <div class="form-group">
                                <label class="control-label">Nom du Topo :</label>
                                <input class="form-control" type="text" name="nomTopo" th:value="${topo.nomTopo}"/>
                                <span class="red" th:errors="${topo.nomTopo}"></span>
                            </div>
                            <div class="form-group">
                                <label class="control-label">Description du Topo :</label>
                                <input class="form-control" type="text" name="descriptionTopo"
                                       th:value="${topo.descriptionTopo}"/>
                                <span class="red" th:errors="${topo.descriptionTopo}"></span>
                            </div>
                            <input type="hidden" name="nomUser" th:value="${#httpServletRequest.remoteUser}"/>
                            <div>
                                <button type="submit" class="btn btn-default">Save</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>

</body>
</html>